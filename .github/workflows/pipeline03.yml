name: Pipeline 03 - Remediation Auto

on:
  push:
    branches:
      - main

jobs:
  remediation:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Node.js auto-fix
        run: |
          echo "Attempting auto-remediation..."
          npm audit fix || true

      - name: Display unresolved vulnerabilities
        run: |
          echo "Unresolved vulnerabilities (if any):"
          npm audit --json | jq '.advisories | to_entries[] | .value.title + " " + .value.severity + " " + .value.cves[]?'
